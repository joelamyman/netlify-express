<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Test Page</title>
  <meta name="description" content="Warning this is a work in progress">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../main.css">
</head>

<body>
  <h1>Thank you so much!</h1>
  <label for="share-link">You can share your results by sharing the following link with your friends and family!</p>
  <input id="share-link" type="text" class="c-share__input">
  <button id="share-link-copy-button" class="o-button" onclick="copyUrlToClipboard()">Copy URL</button>
  <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="I have just constructed the greatest UI of all time, do not even attempt to challenge me." data-url="" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  <div id="test"></div>
  <section class="l-liveView">
    <a id="liveSite"></a>
    <h1 class="o-bwText h-bold h-maxContent h-text--large">Here's your site so far!</h1>
    <div id="site-in-progress">
      <div id="individualResults" class="c-browser">
        <div class="c-shopDisplay__browserNav">
          <div class="c-shopDisplay__buttonHolder">
            <span class="o-circle c-shopDisplay__button c-shopDisplay__button--colour-red"></span>
            <span class="o-circle c-shopDisplay__button c-shopDisplay__button--colour-yellow"></span>
            <span class="o-circle c-shopDisplay__button c-shopDisplay__button--colour-green"></span>
          </div>
          <p class="c-shopDisplay__addressBar">https://www.mycoolshop.com</p>
          <div class="c-shopDisplay__iconHolder">
            <svg class="c-shopDisplay__userIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 137">
              <path d="M0 120c0-27.614 22.386-50 50-50s50 22.386 50 50v17H0v-17z" fill="#C4C4C4" />
              <circle cx="50" cy="38" r="38" fill="#C4C4C4" />
            </svg>
          </div>
        </div>
        <div class="c-shopNav">
          <p class="c-shopNav__title">very good shop (patent pending)</p>
          <p class="c-shopNav__menu">Menu</p>
        </div>
        <div class="c-shopDisplay">
          <!-- QUESTION 1 -->
          <div class="c-shopDisplay__bodyText c-shopDisplay__buttons">
            <div class="c-shopDisplay__buttons">
              <h1 class="c-shopDisplay__heading">Blessed bog roll</h1>
              <div data-button="c-shopDisplay__buttons--top">
                <button class="o-shopButton">Add to basket</button>
              </div>
              <p class="c-shopDisplay__paragraph">This is the most important product you will ever buy. Its
                importance
                cannot be described by words.
                Doesn't
                that sound important!</p>
              <div class="c-shopDisplay__buttons" data-button="c-shopDisplay__buttons--middle">
                <button class="o-shopButton">Add to basket</button>
              </div>
              <!-- QUESTION 2 -->
              <div class="c-shopDisplay__additionalInfo">
                <h2 class="c-shopDisplay__heading2">Additional Information</h2>
                <p class="c-shopDisplay__additionalInfo--text u-hidden">These blessed bog rolls (<abbr
                    title="also known as">aka</abbr> toilet roll), are of the highest quality known in the world.
                  Hand-crafted by billionaires and constructed from paper recycled from the Panama Papers, these bog
                  rolls ensure your bottom receives the plush experience we know you deserve. For legal reasons,
                  please do not read any of the content that may appear on the bog roll, we just need you to flush it
                  as soon as possible. </p>
                <ul class="c-shopDisplay__additionalInfo--bullets u-hidden">
                  <li>Bog rolls (<abbr title="also known as">aka</abbr> toilet roll), are of the highest quality known
                    in the world.</li>
                  <li>Hand-crafted by billionaires.</li>
                  <li>Constructed from paper recycled from the Panama Papers.</li>
                  <li>Ensure your bottom receives the plush experience.</li>
                  <li>For legal reasons, please do not read any of the content on the bog roll, flush as soon as
                    possible.</li>
                </ul>
                <div class="c-shopDisplay__additionalInfo--mixed u-hidden">
                  <p>These blessed bog rolls (<abbr title="also known as">aka</abbr> toilet roll), are of the highest
                    quality known in the world. For legal reasons, please do not read any of the content that may
                    appear on the bog roll, we just need you to flush it as soon as possible.</p>
                  <ul>
                    <li>Hand-crafted by billionaires.</li>
                    <li>Constructed from paper recycled from the Panama Papers.</li>
                    <li>Ensure your bottom receives the plush experience.</li>
                  </ul>
                </div>
                <details class="c-shopDisplay__additionalInfo--details u-hidden">
                  <summary>View more information</summary>
                  <p>These blessed bog rolls (<abbr title="also known as">aka</abbr> toilet roll), are of the highest
                    quality known in the world. Hand-crafted by billionaires and constructed from paper recycled from
                    the Panama Papers, these bog rolls ensure your bottom receives the plush experience we know you
                    deserve. For legal reasons, please do not read any of the content that may appear on the bog roll,
                    we just need you to flush it as soon as possible.</p>
                </details>
              </div>
              <!-- QUESTION 3 -->
              <div class="c-shopDisplay__productOptions">
                <div class="c-shopDisplay__productOptions--select u-hidden">
                  <label class="o-label">Please select a package size:</label>
                  <select class="c-shopDisplay__productOptions--select-font">
                    <option>Small</option>
                    <option>Medium</option>
                    <option>Large</option>
                    <option>Extra large</option>
                  </select>
                </div>
                <fieldset class="c-shopDisplay__productOptions--listOfCards o-fieldset u-hidden">
                  <legend class="o-label">Please select a package size:</legend>
                  <div class="c-shopDisplay__productOptions--listOfCards-grid">
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-small" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-small">
                        <img class="c-listOfCards__img" src="../imgs/smallOrder.svg"><span>Small</span></label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-medium" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-medium">
                        <img class="c-listOfCards__img" src="../imgs/mediumOrder.svg"><span>Medium</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-large" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-large">
                        <img class="c-listOfCards__img" src="../imgs/largeOrder.svg"><span>Large</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-xlarge" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-xlarge">
                        <img class="c-listOfCards__img" src="../imgs/xlargeOrder.svg"><span>Extra large</span>
                      </label>
                    </div>
                  </div>
                </fieldset>
                <fieldset class="c-shopDisplay__productOptions--radios o-fieldset u-hidden">
                  <legend class="o-label">Please select a package size:</legend>
                  <div class="c-shopDisplay__productOptions--radios-grid">
                    <div class="">
                      <input type="radio" id="productOptions--radios-small" name="productOptions">
                      <label for="productOptions--radios-small">Small</label>
                    </div>
                    <div class="">
                      <input type="radio" id="productOptions--radios-medium" name="productOptions">
                      <label for="productOptions--radios-medium">Medium</label>
                    </div>
                    <div class="">
                      <input type="radio" id="productOptions--radios-large" name="productOptions">
                      <label for="productOptions--radios-large">Large</label>
                    </div>
                    <div class="">
                      <input type="radio" id="productOptions--radios-xlarge" name="productOptions">
                      <label for="productOptions--radios-xlarge">Extra large</label>
                    </div>
                  </div>
                </fieldset>
                <fieldset class="c-shopDisplay__productOptions--rowOfCards o-fieldset u-hidden">
                  <legend class="o-label">Please select a package size:</legend>
                  <div class="c-shopDisplay__productOptions--rowOfCards-grid">
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-small" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-small">
                        <img class="c-rowOfCards__img" src="../imgs/smallOrder.svg"><span>Small</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-medium" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-medium">
                        <img class="c-rowOfCards__img" src="../imgs/mediumOrder.svg"><span>Medium</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-large" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-large">
                        <img class="c-rowOfCards__img" src="../imgs/largeOrder.svg"><span>Large</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-xlarge" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-xlarge">
                        <img class="c-rowOfCards__img" src="../imgs/xlargeOrder.svg"><span>Extra large</span>
                      </label>
                    </div>
                  </div>
                </fieldset>
              </div>
              <div class="c-shopDisplay__buttons" data-button="c-shopDisplay__buttons--bottom">
                <button class="o-shopButton">Add to basket</button>
              </div>
            </div>
          </div>
          <!-- QUESTION 5 -->
          <div class="c-shopDisplay__imagePos">
            <img class="c-shopDisplay__image" src="../imgs/toiletRoll.svg">
          </div>
          <!-- QUESTION 6 -->
          <div style="display: none;" class="c-shopDisplay__buyButton">
            <button>Buy now!</button>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="l-liveView">
    <a id="liveSite"></a>
    <h1 class="o-bwText h-bold h-maxContent h-text--large">Here's your site so far!</h1>
    <div id="site-in-progress">
      <div class="c-browser">
        <div class="c-shopDisplay__browserNav">
          <div class="c-shopDisplay__buttonHolder">
            <span class="o-circle c-shopDisplay__button c-shopDisplay__button--colour-red"></span>
            <span class="o-circle c-shopDisplay__button c-shopDisplay__button--colour-yellow"></span>
            <span class="o-circle c-shopDisplay__button c-shopDisplay__button--colour-green"></span>
          </div>
          <p class="c-shopDisplay__addressBar">https://www.mycoolshop.com</p>
          <div class="c-shopDisplay__iconHolder">
            <svg class="c-shopDisplay__userIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 137">
              <path d="M0 120c0-27.614 22.386-50 50-50s50 22.386 50 50v17H0v-17z" fill="#C4C4C4" />
              <circle cx="50" cy="38" r="38" fill="#C4C4C4" />
            </svg>
          </div>
        </div>
        <div class="c-shopNav">
          <p class="c-shopNav__title">very good shop (patent pending)</p>
          <p class="c-shopNav__menu">Menu</p>
        </div>
        <div id="popularResults" class="c-shopDisplay">
          <!-- QUESTION 1 -->
          <div class="c-shopDisplay__bodyText c-shopDisplay__buttons">
            <div class="c-shopDisplay__buttons">
              <h1 class="c-shopDisplay__heading">Blessed bog roll</h1>
              <div data-button="c-shopDisplay__buttons--top">
                <button class="o-shopButton">Add to basket</button>
              </div>
              <p class="c-shopDisplay__paragraph">This is the most important product you will ever buy. Its
                importance
                cannot be described by words.
                Doesn't
                that sound important!</p>
              <div class="c-shopDisplay__buttons" data-button="c-shopDisplay__buttons--middle">
                <button class="o-shopButton">Add to basket</button>
              </div>
              <!-- QUESTION 2 -->
              <div class="c-shopDisplay__additionalInfo">
                <h2 class="c-shopDisplay__heading2">Additional Information</h2>
                <p class="c-shopDisplay__additionalInfo--text u-hidden">These blessed bog rolls (<abbr
                    title="also known as">aka</abbr> toilet roll), are of the highest quality known in the world.
                  Hand-crafted by billionaires and constructed from paper recycled from the Panama Papers, these bog
                  rolls ensure your bottom receives the plush experience we know you deserve. For legal reasons,
                  please do not read any of the content that may appear on the bog roll, we just need you to flush it
                  as soon as possible. </p>
                <ul class="c-shopDisplay__additionalInfo--bullets u-hidden">
                  <li>Bog rolls (<abbr title="also known as">aka</abbr> toilet roll), are of the highest quality known
                    in the world.</li>
                  <li>Hand-crafted by billionaires.</li>
                  <li>Constructed from paper recycled from the Panama Papers.</li>
                  <li>Ensure your bottom receives the plush experience.</li>
                  <li>For legal reasons, please do not read any of the content on the bog roll, flush as soon as
                    possible.</li>
                </ul>
                <div class="c-shopDisplay__additionalInfo--mixed u-hidden">
                  <p>These blessed bog rolls (<abbr title="also known as">aka</abbr> toilet roll), are of the highest
                    quality known in the world. For legal reasons, please do not read any of the content that may
                    appear on the bog roll, we just need you to flush it as soon as possible.</p>
                  <ul>
                    <li>Hand-crafted by billionaires.</li>
                    <li>Constructed from paper recycled from the Panama Papers.</li>
                    <li>Ensure your bottom receives the plush experience.</li>
                  </ul>
                </div>
                <details class="c-shopDisplay__additionalInfo--details u-hidden">
                  <summary>View more information</summary>
                  <p>These blessed bog rolls (<abbr title="also known as">aka</abbr> toilet roll), are of the highest
                    quality known in the world. Hand-crafted by billionaires and constructed from paper recycled from
                    the Panama Papers, these bog rolls ensure your bottom receives the plush experience we know you
                    deserve. For legal reasons, please do not read any of the content that may appear on the bog roll,
                    we just need you to flush it as soon as possible.</p>
                </details>
              </div>
              <!-- QUESTION 3 -->
              <div class="c-shopDisplay__productOptions">
                <div class="c-shopDisplay__productOptions--select u-hidden">
                  <label class="o-label">Please select a package size:</label>
                  <select class="c-shopDisplay__productOptions--select-font">
                    <option>Small</option>
                    <option>Medium</option>
                    <option>Large</option>
                    <option>Extra large</option>
                  </select>
                </div>
                <fieldset class="c-shopDisplay__productOptions--listOfCards o-fieldset u-hidden">
                  <legend class="o-label">Please select a package size:</legend>
                  <div class="c-shopDisplay__productOptions--listOfCards-grid">
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-small" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-small">
                        <img class="c-listOfCards__img" src="../imgs/smallOrder.svg"><span>Small</span></label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-medium" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-medium">
                        <img class="c-listOfCards__img" src="../imgs/mediumOrder.svg"><span>Medium</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-large" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-large">
                        <img class="c-listOfCards__img" src="../imgs/largeOrder.svg"><span>Large</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--listOfCards">
                      <input type="radio" id="productOptions--listOfCards-xlarge" name="productOptions">
                      <label class="u-semibold u-halfPadding c-listOfCards__label"
                        for="productOptions--listOfCards-xlarge">
                        <img class="c-listOfCards__img" src="../imgs/xlargeOrder.svg"><span>Extra large</span>
                      </label>
                    </div>
                  </div>
                </fieldset>
                <fieldset class="c-shopDisplay__productOptions--radios o-fieldset u-hidden">
                  <legend class="o-label">Please select a package size:</legend>
                  <div class="c-shopDisplay__productOptions--radios-grid">
                    <div class="">
                      <input type="radio" id="productOptions--radios-small" name="productOptions">
                      <label for="productOptions--radios-small">Small</label>
                    </div>
                    <div class="">
                      <input type="radio" id="productOptions--radios-medium" name="productOptions">
                      <label for="productOptions--radios-medium">Medium</label>
                    </div>
                    <div class="">
                      <input type="radio" id="productOptions--radios-large" name="productOptions">
                      <label for="productOptions--radios-large">Large</label>
                    </div>
                    <div class="">
                      <input type="radio" id="productOptions--radios-xlarge" name="productOptions">
                      <label for="productOptions--radios-xlarge">Extra large</label>
                    </div>
                  </div>
                </fieldset>
                <fieldset class="c-shopDisplay__productOptions--rowOfCards o-fieldset u-hidden">
                  <legend class="o-label">Please select a package size:</legend>
                  <div class="c-shopDisplay__productOptions--rowOfCards-grid">
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-small" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-small">
                        <img class="c-rowOfCards__img" src="../imgs/smallOrder.svg"><span>Small</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-medium" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-medium">
                        <img class="c-rowOfCards__img" src="../imgs/mediumOrder.svg"><span>Medium</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-large" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-large">
                        <img class="c-rowOfCards__img" src="../imgs/largeOrder.svg"><span>Large</span>
                      </label>
                    </div>
                    <div class="form-questionHolder-inputStack form-questionHolder-inputStack--rowOfCards">
                      <input type="radio" id="productOptions--rowOfCards-xlarge" name="productOptions">
                      <label class="u-semibold u-halfPadding c-rowOfCards__label"
                        for="productOptions--rowOfCards-xlarge">
                        <img class="c-rowOfCards__img" src="../imgs/xlargeOrder.svg"><span>Extra large</span>
                      </label>
                    </div>
                  </div>
                </fieldset>
              </div>
              <div class="c-shopDisplay__buttons" data-button="c-shopDisplay__buttons--bottom">
                <button class="o-shopButton">Add to basket</button>
              </div>
            </div>
          </div>
          <!-- QUESTION 5 -->
          <div class="c-shopDisplay__imagePos">
            <img class="c-shopDisplay__image" src="../imgs/toiletRoll.svg">
          </div>
          <!-- QUESTION 6 -->
          <div style="display: none;" class="c-shopDisplay__buyButton">
            <button>Buy now!</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <iframe class="c-questionnaire" src="https://docs.google.com/forms/d/e/1FAIpQLSfac-tCSqyE_9nNvrQ6dFTb5IFxD4IK4u7yrGeLd22LHHJBkg/viewform?embedded=true" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>

  <script>

    console.log(window.location.href);
    let windowUrl = window.location.href;
    windowUrl = windowUrl.replace("complete", "share");
    console.log(windowUrl);
    history.replaceState(null, null, windowUrl);

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    if (urlParams.has('id')){
      const paramId = urlParams.get('id');
      console.log(paramId);
    
      fetch(`../.netlify/functions/app/results/share/?id="${paramId}"`)
        .then(function(response) {
          // The response is a Response instance.
          // You parse the data into a useable format using `.json()`
          return response.json();
        }).then(function(data) {
          // `data` is the parsed version of the JSON returned from the above endpoint.
          console.log(data.message[0]);  // { "userId": 1, "id": 1, "title": "...", "body": "..." }
          const receivedData = data.message[0];
          console.log(`cleanButtons: ${receivedData.cleanButtons[0]}` );
          console.log(`imagePos: ${receivedData.imagePos[0]}` );
          console.log(`infoAmount: ${receivedData.infoAmount[0]}` );
          console.log(`productOptions: ${receivedData.productOptions[0]}` );
          console.log(`textSize: ${receivedData.textSize[0]}` );
          updateStyling(receivedData.textSize[0], 'individualResults');
          updateStyling(receivedData.infoAmount[0], 'individualResults');
          updateStyling(receivedData.productOptions[0], 'individualResults');
          updateStyling(receivedData.imagePos[0], 'individualResults');
          updateStyling(receivedData.cleanButtons[0], 'individualResults');
        });

      fetch(`../.netlify/functions/app/results/popular/`)
        .then(function(popularResponse) {
          // The response is a Response instance.
          // You parse the data into a useable format using `.json()`
          return popularResponse.json();
        }).then(function(popularData) {
          // `data` is the parsed version of the JSON returned from the above endpoint.
          console.log(popularData);  // { "userId": 1, "id": 1, "title": "...", "body": "..." }
          updateStyling(popularData.textSize, 'popularResults');
          updateStyling(popularData.additionalInfo, 'popularResults');
          updateStyling(popularData.productOptions, 'popularResults');
          updateStyling(popularData.imagePos, 'popularResults');
          updateStyling(popularData.buttons, 'popularResults');
        });
      }

      const twitterButton = document.querySelector('.twitter-share-button');
      const shareLinkInput = document.querySelector('#share-link');
      twitterButton.dataset.url = windowUrl;
      shareLinkInput.value = windowUrl;

      function copyUrlToClipboard(){
        var copyText = document.querySelector("#share-link");

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /*For mobile devices*/

        /* Copy the text inside the text field */
        document.execCommand("copy");

        /* Alert the copied text */
        
        document.querySelector('#share-link-copy-button').innerHTML = "Copied text ✅"
      }
  </script>

  <script src="../js/styling-helpers.js"></script>
</body>


</html>